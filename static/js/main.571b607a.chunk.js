(this["webpackJsonpfinal-test-web3"]=this["webpackJsonpfinal-test-web3"]||[]).push([[0],{101:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"guy","type":"address"},{"name":"wad","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"src","type":"address"},{"name":"dst","type":"address"},{"name":"wad","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"wad","type":"uint256"}],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"dst","type":"address"},{"name":"wad","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"deposit","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"src","type":"address"},{"indexed":true,"name":"guy","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"src","type":"address"},{"indexed":true,"name":"dst","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"dst","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"src","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Withdrawal","type":"event"}]')},122:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"contract DD2Token","name":"_dd2","type":"address"},{"internalType":"uint256","name":"_dd2PerBlock","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"EmergencyWithdraw","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdraw","type":"event"},{"inputs":[],"name":"dd2","outputs":[{"internalType":"contract DD2Token","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"dd2PerBlock","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"deposit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"emergencyWithdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_from","type":"uint256"},{"internalType":"uint256","name":"_to","type":"uint256"}],"name":"getBlocks","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"pendingDD2","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"updatePool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userInfo","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"rewardDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"weth","outputs":[{"internalType":"contract IWETH","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},151:function(e,t,n){},153:function(e,t,n){},159:function(e,t,n){},160:function(e,t){},168:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(117),s=n.n(i),u=(n(151),n(63)),c=n(41),o=n(19),p=n(4),l=n.n(p),d=n(209),b=n(207),y=(n(153),n(53)),f=n(75),m=n(120),h=n(121),w=n(122),j=n(101),v=n(206),x=n(6),O=function(e){var t=e.user,n=e.handleState,a=e.onChange,r=e.handleSubmit,i=e.type,s=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(t,i),n(t,i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log(i),Object(x.jsxs)(d.a,{width:"30%",maxWidth:400,display:"inline-block",border:"1px solid #333",padding:"16px 32px",fontWeight:"bold",position:"absolute",top:"10%",left:"30%",borderRadius:"24px",bgcolor:"#fefbd8",children:[Object(x.jsx)(d.a,{textAlign:"left",children:i}),Object(x.jsx)(d.a,{mt:"50px",children:Object(x.jsx)(v.a,{label:"Approve",size:"small",onChange:function(e){return a(e,i)}})}),Object(x.jsxs)(d.a,{mt:"20px",children:["Your WETH balance: ",t&&t.balance," WETH"]}),Object(x.jsx)(d.a,{marginTop:"20px",children:Object(x.jsx)(b.a,{variant:"contained",size:"small",onClick:s,children:i})})]})},g=(n(159),function(e){var t=e.user,n=e.allContract,r=e.approve,i=e.deposit,s=e.withdraw,p=e.harvest,y=Object(a.useState)(""),f=Object(o.a)(y,2),m=f[0],h=f[1],w=Object(a.useState)(""),j=Object(o.a)(w,2),v=j[0],g=j[1],k=Object(a.useState)(""),S=Object(o.a)(k,2),T=S[0],C=S[1],M=Object(a.useState)(!1),E=Object(o.a)(M,2),D=E[0],W=E[1],A=Object(a.useState)(!1),N=Object(o.a)(A,2),I=N[0],P=N[1],H=Object(a.useState)(!1),B=Object(o.a)(H,2),R=B[0],_=B[1],F=Object(a.useState)(!1),U=Object(o.a)(F,2),z=U[0],J=U[1],L=function(e,t){switch(t){case"approve":W((function(e){return!e}));break;case"deposit":P((function(e){return!e}));break;case"withdraw":_((function(e){return!e}))}},V=function(){var e=Object(c.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=a,e.next="approve"===e.t0?4:"deposit"===e.t0?9:"withdraw"===e.t0?11:"harvest"===e.t0?13:15;break;case 4:return e.next=6,r(null===n||void 0===n?void 0:n.wethContract,null===n||void 0===n?void 0:n.contract,m);case 6:return"boolean"===typeof e.sent&&J(!0),e.abrupt("break",16);case 9:return i(null===n||void 0===n?void 0:n.contract,v),e.abrupt("break",16);case 11:return s(null===n||void 0===n?void 0:n.contract,T),e.abrupt("break",16);case 13:return p(null===n||void 0===n?void 0:n.contract),e.abrupt("break",16);case 15:throw new Error("Unknown type");case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(0),console.log(e.t1);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(e,t){switch(t){case"approve":h(e.target.value);break;case"deposit":g(e.target.value);break;case"withdraw":C(e.target.value);break;default:throw new Error("Unknown type")}},q={user:t,handleState:L,handleSubmit:V,onChange:Y,type:"approve"},K={user:t,handleState:L,handleSubmit:V,onChange:Y,type:"deposit"},G={user:t,handleState:L,handleSubmit:V,onChange:Y,type:"withdraw"};return Object(x.jsxs)(d.a,{width:"70%",maxWidth:600,display:"inline-block",marginLeft:"auto",border:"1px solid #333",padding:"16px 32px",fontWeight:"bold",children:[Object(x.jsxs)(d.a,{display:"flex",justifyContent:"space-between",children:[Object(x.jsxs)(d.a,{textOverflow:"ellipsis",overflow:"hidden",width:"150px",whiteSpace:"nowrap",children:["Wallet adress: ",t&&t.address]}),Object(x.jsxs)("div",{className:"user-balance",children:["Balance: ",t&&t.balance," WETH"]})]}),Object(x.jsxs)(d.a,{display:"flex",justifyContent:"space-between",marginTop:4,children:[Object(x.jsxs)(d.a,{children:["Token earned: ",t&&t.earned," DD2"]}),Object(x.jsx)(d.a,{marginRight:3,children:Object(x.jsx)(b.a,{variant:"contained",size:"small",onClick:function(e){return V(e,"harvest")},children:"Harvest"})})]}),z?Object(x.jsxs)(d.a,{margin:"30px auto",display:"flex",justifyContent:"center",children:[Object(x.jsx)(d.a,{margin:"0 10px",width:"40%",children:Object(x.jsx)(b.a,{variant:"contained",style:{width:"100%"},onClick:function(e){return L(0,"deposit")},children:"deposit"})}),Object(x.jsx)(d.a,{width:"40%",children:Object(x.jsx)(b.a,{variant:"contained",style:{width:"100%"},onClick:function(e){return L(0,"withdraw")},children:"withdraw"})})]}):Object(x.jsx)(d.a,{width:"50%",margin:"30px auto",children:Object(x.jsx)(b.a,{variant:"contained",style:{width:"100%"},onClick:function(e){return L(0,"approve")},children:"Approve"})}),Object(x.jsxs)(d.a,{textAlign:"left",children:["Your stake: ",t&&t.stake," WETH"]}),Object(x.jsxs)(d.a,{textAlign:"left",marginTop:5,marginBottom:3,children:["All stake: ",t&&t.allStake," WETH"]}),D&&Object(x.jsx)(O,Object(u.a)({},q)),I&&Object(x.jsx)(O,Object(u.a)({},K)),R&&Object(x.jsx)(O,Object(u.a)({},G))]})}),k="bb6b6f6f39434b1da5b19f5853dfd502",S={1:"https://mainnet.infura.io/v3/".concat(k),4:"https://rinkeby.infura.io/v3/".concat(k),5:"https://goerli.infura.io/v3/".concat(k),42:"https://kovan.infura.io/v3/".concat(k)},T=new m.a({supportedChainIds:[1,4,5,42]}),C=new h.a({supportedChainIds:[1,4,5,42],rpc:S,bridge:"https://bridge.walletconnect.org",qrcode:!0}),M={address:"",balance:"",stake:"",earned:"",allStake:""},E=function(){var e=Object(f.c)(),t=e.account,n=(e.chainId,e.connector,e.activate),r=e.library,i=Object(a.useState)(M),s=Object(o.a)(i,2),p=s[0],m=s[1],h=Object(a.useState)(),v=Object(o.a)(h,2),O=v[0],k=v[1],S=Object(a.useState)(),E=Object(o.a)(S,2),D=E[0],W=E[1];console.log(D);var A=function(){var e=Object(c.a)(l.a.mark((function e(t,n){var a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.balanceOf(n);case 2:return a=e.sent,r=y.a.utils.formatEther(a),i=Math.round(100*Number(r))/100,e.abrupt("return",String(i));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(c.a)(l.a.mark((function e(t,n){var a,r,i,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.userInfo(n);case 2:return a=e.sent,r=y.a.utils.formatEther(a[0]),i=y.a.utils.formatEther(a[1]),s=String(Math.round(100*Number(r))/100),u=String(Math.round(100*Number(i))/100),e.abrupt("return",{formatStake:s,formatEarned:u});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(c.a)(l.a.mark((function e(t,n){var a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.balanceOf(n.address);case 2:return a=e.sent,r=y.a.utils.formatEther(a),i=Math.round(100*Number(r))/100,e.abrupt("return",String(i));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(l.a.mark((function e(n,a,r){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=!0,e.next=3,n.approve(a.address,y.a.utils.parseEther(r)).catch((function(e){console.log(e),i=!1}));case 3:return e.sent,e.next=6,_(t,O,D);case 6:return console.log("APPROVE SUCCESS"),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(c.a)(l.a.mark((function e(n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.deposit(a).catch((function(e){console.log(e)}));case 2:e.sent,_(t,O,D),console.log("DEPOSIT SUCCESS");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.a)(l.a.mark((function e(n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.withdraw(a).then((function(){t&&D&&(_(t,O,D),console.log("WITHDRAW SUCCESS"))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.withdraw("0").catch((function(e){return console.log(e)})).then(Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!D){e.next=4;break}return e.next=3,_(t,O,D);case 3:console.log("HARVEST SUCCESS");case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(c.a)(l.a.mark((function e(t,n,a){var r,i,s,u,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.t0=Promise,e.next=4,A(null===a||void 0===a?void 0:a.wethContract,t);case 4:return e.t1=e.sent,e.next=7,N(null===a||void 0===a?void 0:a.contract,t);case 7:return e.t2=e.sent,e.next=10,I(null===a||void 0===a?void 0:a.wethContract,null===a||void 0===a?void 0:a.contract);case 10:return e.t3=e.sent,e.t4=[e.t1,e.t2,e.t3],e.next=14,e.t0.all.call(e.t0,e.t4);case 14:r=e.sent,i=r[0],s=r[1],u=s.formatStake,c=s.formatEarned,o=r[2],m({address:t,balance:i,stake:u,earned:c,allStake:o});case 19:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(t){var e=new y.a.providers.JsonRpcProvider("https://rinkeby.infura.io/v3/bb6b6f6f39434b1da5b19f5853dfd502"),n=r.getSigner(),a={contract:new y.a.Contract("0x9da687e88b0A807e57f1913bCD31D56c49C872c2",w,n),wethContract:new y.a.Contract("0xc778417e063141139fce010982780140aa0cd5ab",j,n),dd2Contract:new y.a.Contract("0xb1745657CB84c370DD0Db200a626d06b28cc5872",j,n)};_(t,e,a),k(e),W(a)}}),[t]);var F={user:p,allContract:D,approve:P,deposit:H,withdraw:B,harvest:R};return Object(x.jsx)("div",{className:"App",children:t?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(g,Object(u.a)({},F))}):Object(x.jsxs)(d.a,{className:"app-connect",display:"inline-flex",flexDirection:"column",children:[Object(x.jsx)(d.a,{mt:10,children:Object(x.jsx)(b.a,{variant:"contained",size:"large",onClick:function(){n(T)},className:"btn btn-injected",children:"Connect Metamask"})}),Object(x.jsx)(d.a,{mt:10,children:Object(x.jsx)(b.a,{variant:"contained",size:"large",onClick:function(){n(C,void 0,!0).catch((function(e){return console.log(e)}))},className:"btn",children:"Connect walletconnect"})})]})})},D=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,308)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))},W=n(99);function A(e,t){return new W.a(e)}var N=Object(f.b)("NETWORK");s.a.createRoot(document.getElementById("root")).render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(f.a,{getLibrary:A,children:Object(x.jsx)(N,{getLibrary:A,children:Object(x.jsx)(E,{})})})})),D()}},[[168,1,2]]]);
//# sourceMappingURL=main.571b607a.chunk.js.map